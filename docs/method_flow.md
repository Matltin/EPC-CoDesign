# پروژه EPC - چهار روش آپدیت

این پروژه شامل پیاده‌سازی الگوریتم EPC (Emperor Penguin Colony) با **چهار روش مختلف آپدیت** است.

## روش‌های آپدیت

### Method A
- **توضیح**: مارپیچ روی تمام جفت‌بعدها + شعاع ثابت (فرمول استاندارد)
- **پیچیدگی**: O(T * N * D²)
- **مناسب برای**: ابعاد کوچک تا متوسط
- **استفاده**: `update_method="A"`

### Method A_R
- **توضیح**: مارپیچ روی تمام جفت‌بعدها + شعاع آپدیت می‌شود
- **پیچیدگی**: O(T * N * D²)
- **مناسب برای**: ابعاد کوچک تا متوسط با نیاز به exploration بیشتر
- **تفاوت با A**: شعاع بر اساس میانگین وزن‌دار فاصله‌ها محاسبه می‌شود
- **استفاده**: `update_method="A_R"`

### Method B
- **توضیح**: مارپیچ فقط روی K جفت‌بعد تصادفی + شعاع ثابت
- **پیچیدگی**: O(T * N * K) که برای D بزرگ خیلی سریع‌تر است
- **مناسب برای**: ابعاد بزرگ (D > 50)
- **استفاده**: `update_method="B"` + تنظیم `pairs_per_penguin`

### Method B_R
- **توضیح**: مارپیچ فقط روی K جفت‌بعد تصادفی + شعاع آپدیت می‌شود
- **پیچیدگی**: O(T * N * K)
- **مناسب برای**: ابعاد بزرگ با نیاز به exploration بیشتر
- **تفاوت با B**: شعاع بر اساس میانگین وزن‌دار فاصله‌ها محاسبه می‌شود
- **استفاده**: `update_method="B_R"` + تنظیم `pairs_per_penguin`

## نحوه استفاده

### 1. تنظیم متود در `experiments.py`

در فایل `experiments.py`، خط زیر را پیدا کنید:

```python
cfg = EPCConfig(
    N=20,
    Tmax=100,
    mu0=0.5,
    m0=0.5,
    mu_decay=0.99,
    m_decay=0.99,
    update_method="A",  # <-- اینجا متود مورد نظر را انتخاب کنید
    pairs_per_penguin=6,
    log_enabled=True,
    log_every=1,
    log_path=LOG_PATH,
)
```

مقدار `update_method` را به یکی از گزینه‌های زیر تغییر دهید:
- `"A"` برای Method A
- `"A_R"` برای Method A_R
- `"B"` برای Method B
- `"B_R"` برای Method B_R

### 2. تنظیم پارامتر K (فقط برای B و B_R)

اگر از Method B یا B_R استفاده می‌کنید، می‌توانید تعداد جفت‌بعدها را تنظیم کنید:

```python
pairs_per_penguin=6  # تعداد جفت‌بعدهای تصادفی در هر iteration
```

**نکته**: اگر `pairs_per_penguin >= D*(D-1)/2` باشد، عملاً معادل Method A می‌شود.

### 3. اجرای کد

```bash
python experiments.py
```

خروجی در فایل `out.txt` ذخیره می‌شود.

## تفاوت‌های کلیدی

### شعاع ثابت (A, B) vs شعاع متغیر (A_R, B_R)

در روش‌های با شعاع ثابت:
```python
r_k = a * exp(b * theta_k)
```

در روش‌های با شعاع متغیر:
```python
r_i = sqrt(x[p]^2 + x[q]^2)  # شعاع فعلی
r_b = sqrt(best[p]^2 + best[q]^2)  # شعاع بهترین
r_k = (1-Q) * r_b + Q * r_i  # میانگین وزن‌دار
```

این تغییر باعث می‌شود الگوریتم در فضای جستجو انعطاف‌پذیرتر باشد و از گیر کردن در مینیمم‌های محلی جلوگیری کند.

## مثال‌های استفاده

### مثال 1: بعد کوچک با شعاع ثابت
```python
cfg = EPCConfig(
    N=20,
    Tmax=100,
    update_method="A",
    # ...
)
```

### مثال 2: بعد کوچک با شعاع متغیر (exploration بیشتر)
```python
cfg = EPCConfig(
    N=20,
    Tmax=100,
    update_method="A_R",
    # ...
)
```

### مثال 3: بعد بزرگ با شعاع ثابت
```python
cfg = EPCConfig(
    N=20,
    Tmax=100,
    update_method="B",
    pairs_per_penguin=10,
    # ...
)
```

### مثال 4: بعد بزرگ با شعاع متغیر
```python
cfg = EPCConfig(
    N=20,
    Tmax=100,
    update_method="B_R",
    pairs_per_penguin=10,
    # ...
)
```

## ساختار پروژه

```
.
├── epc.py              # الگوریتم EPC با چهار متود
├── utils.py            # توابع کمکی و Logger
├── objectives.py       # توابع benchmark (Sphere, Rosenbrock)
├── experiments.py      # اجرای آزمایش‌ها
├── README.md           # این فایل
└── out.txt             # خروجی (ایجاد می‌شود)
```

## نکات مهم

1. **هیچ کامنتی حذف نشده**: تمام کامنت‌های اصلی حفظ شده‌اند
2. **منطق اصلی بدون تغییر**: فقط توابع جدید اضافه شده‌اند
3. **چهار متود مستقل**: هر متود به صورت جداگانه پیاده‌سازی شده
4. **سازگاری کامل**: با کد قبلی کاملاً سازگار است

## توصیه‌ها

- برای D < 30: از Method A یا A_R استفاده کنید
- برای D >= 30: از Method B یا B_R استفاده کنید
- برای مسائل با مینیمم‌های محلی زیاد: روش‌های با `_R` (شعاع متغیر) بهتر عمل می‌کنند
- برای مسائل ساده: روش‌های بدون `_R` (شعاع ثابت) سریع‌تر همگرا می‌شوند
